# ==============================================================================
# BIZUIT Custom Form Template - Environment Configuration
# ==============================================================================
#
# This file shows the environment variables needed to run this form.
# These variables should be configured in the PARENT runtime-app, NOT here.
#
# Copy this content to: ../../runtime-app/.env.local
#
# ==============================================================================

# ==============================================================================
# CRITICAL: Development Mode
# ==============================================================================
# Allow forms to load without Dashboard token (for local testing)
#
# IMPORTANT: This is a SERVER-SIDE variable (no NEXT_PUBLIC_ prefix)
# This means it can be different per deployment WITHOUT requiring a rebuild.
#
# LOCAL DEVELOPMENT:
#   ALLOW_DEV_MODE=true  → Allows testing with dev-credentials.js
#
# PRODUCTION:
#   ALLOW_DEV_MODE=false → Requires Dashboard token (secure)
#   OR leave undefined → Default is false (secure by default)
#
# ⚠️ NEVER deploy to production with 'true' - CRITICAL SECURITY RISK!
#
ALLOW_DEV_MODE=true

# ==============================================================================
# Dashboard API Configuration
# ==============================================================================
# URL of the BIZUIT BPM Dashboard API
#
# FOR LOCAL DEVELOPMENT (with CORS proxy):
#   Use the Next.js API proxy to avoid CORS issues
#   NEXT_PUBLIC_BIZUIT_DASHBOARD_API_URL=/api/bizuit
#
# FOR PRODUCTION (direct URL):
#   Use the full URL to your tenant's Dashboard API
#   Pattern: https://test.bizuit.com/{tenant}BizuitDashboardapi/api
#   Example: https://test.bizuit.com/arielschBizuitDashboardapi/api
#
NEXT_PUBLIC_BIZUIT_DASHBOARD_API_URL=/api/bizuit

# HTTP timeout (milliseconds)
NEXT_PUBLIC_BIZUIT_TIMEOUT=30000

# Token expiration time (minutes)
NEXT_PUBLIC_BIZUIT_TOKEN_EXPIRATION_MINUTES=60

# ==============================================================================
# Backend FastAPI
# ==============================================================================
# URL of the FastAPI backend (internal, server-side only)
#
# Local development: http://127.0.0.1:8000
# Production: http://127.0.0.1:8000 (same server)
#
FASTAPI_URL=http://127.0.0.1:8000

# ==============================================================================
# Deployment Configuration
# ==============================================================================
# Base path for subdirectory deployment
#
# LOCAL DEVELOPMENT:
#   Leave empty or commented out (root deployment)
#
# PRODUCTION:
#   Set to your subdirectory path
#   Example: /BIZUITCustomForms
#   Example: /arielschBIZUITCustomForms
#
# NEXT_PUBLIC_BASE_PATH=/BIZUITCustomForms

# ==============================================================================
# Admin Panel Security
# ==============================================================================
# Session timeout for admin panel (minutes)
NEXT_PUBLIC_SESSION_TIMEOUT_MINUTES=30

# ==============================================================================
# Iframe Security (for /formsa/* routes)
# ==============================================================================
# Allowed origins for iframe embedding (comma-separated)
# Supports wildcards: https://*.example.com
#
# Examples:
#   NEXT_PUBLIC_ALLOWED_IFRAME_ORIGINS=https://test.bizuit.com
#   NEXT_PUBLIC_ALLOWED_IFRAME_ORIGINS=https://test.bizuit.com,https://app.example.com
#
NEXT_PUBLIC_ALLOWED_IFRAME_ORIGINS=https://test.bizuit.com

# Allow localhost for iframe testing (development only)
NEXT_PUBLIC_ALLOW_LOCALHOST_IFRAME=true

# ==============================================================================
# Webhook Secret (for GitHub Actions)
# ==============================================================================
# Secret key for authenticating GitHub webhook calls
# Generate with: openssl rand -hex 32
#
WEBHOOK_SECRET=your-webhook-secret-change-me

# ==============================================================================
# NOTES
# ==============================================================================
#
# 1. Variables with NEXT_PUBLIC_ prefix are accessible in client code
#    → Changing them requires REBUILD (npm run build)
#
# 2. Variables without prefix are server-side only
#    → Changing them only requires RESTART (./stop-all.sh && ./start-all.sh)
#
# 3. After creating .env.local, restart the development server
#
# 4. NEVER commit .env.local to git (already in .gitignore)
#
# ==============================================================================
