<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Form Template - Dev Mode</title>
  <!-- Enable DEV_MODE for conditional logging (devLog/devWarn only log when this is true) -->
  <script>window.DEV_MODE = true;</script>

  <!-- Google Fonts - Quicksand -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: {
              DEFAULT: 'hsl(24.6, 95%, 53.1%)',
              foreground: 'hsl(210, 40%, 98%)',
            },
            destructive: {
              DEFAULT: 'hsl(0, 84.2%, 60.2%)',
              foreground: 'hsl(210, 40%, 98%)',
            },
            secondary: {
              DEFAULT: 'hsl(210, 40%, 96.1%)',
              foreground: 'hsl(222.2, 47.4%, 11.2%)',
            },
          }
        }
      }
    }
  </script>

  <style>
    * {
      font-family: 'Quicksand', sans-serif;
    }

    /* Bizuit Theme CSS Variables - Orange Theme */
    :root {
      --background: 0 0% 100%;
      --foreground: 222.2 84% 4.9%;
      --card: 0 0% 100%;
      --card-foreground: 222.2 84% 4.9%;
      --popover: 0 0% 100%;
      --popover-foreground: 222.2 84% 4.9%;
      --primary: 24.6 95% 53.1%;
      --primary-foreground: 210 40% 98%;
      --secondary: 210 40% 96.1%;
      --secondary-foreground: 222.2 47.4% 11.2%;
      --muted: 210 40% 96.1%;
      --muted-foreground: 215.4 16.3% 46.9%;
      --accent: 210 40% 96.1%;
      --accent-foreground: 222.2 47.4% 11.2%;
      --destructive: 0 84.2% 60.2%;
      --destructive-foreground: 210 40% 98%;
      --border: 214.3 31.8% 91.4%;
      --input: 214.3 31.8% 91.4%;
      --ring: 24.6 95% 53.1%;
      --radius: 0.5rem;
    }
  </style>

  <!-- React & ReactDOM from CDN -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
</head>
<body>
  <div id="root"></div>

  <!-- Load dev credentials (gitignored file) -->
  <script type="module" src="./dev-credentials.js"></script>

  <!-- Load the built form as ES module -->
  <script type="module">
    // Force light theme and orange color
    localStorage.setItem('bizuit-ui-theme', 'light');
    localStorage.setItem('bizuit-ui-color-theme', 'orange');

    // Import dev credentials (from dev-credentials.js)
    import { DEV_CREDENTIALS } from './dev-credentials.js';

    // Dynamic import with cache buster to always load latest version
    const cacheBuster = Date.now();
    console.log('ðŸ”„ Loading form.dev.js with cache buster:', cacheBuster);
    const formModule = await import('./dist/form.dev.js?v=' + cacheBuster);
    const FormTemplate = formModule.default;
    console.log('âœ… Form module loaded successfully at:', new Date().toLocaleTimeString());

    // Mount the form with mock dashboard params
    const container = document.getElementById('root');
    const root = ReactDOM.createRoot(container);

    // Mock dashboard parameters for testing
    // In dev mode: pass devUsername/devPassword/devApiUrl/devPluginApiUrl + roles/roleSettings
    // In production: Dashboard/FormLoader provides token, apiUrl, pluginApiUrl, roles, roleSettings
    const mockDashboardParams = {
      userName: DEV_CREDENTIALS.username,
      instanceId: 'dev-instance-001',
      eventName: 'TestProcess',
      activityName: 'Start',
      // Dev credentials (NOT committed to repo)
      devUsername: DEV_CREDENTIALS.username,
      devPassword: DEV_CREDENTIALS.password,
      devApiUrl: DEV_CREDENTIALS.apiUrl,
      devPluginApiUrl: DEV_CREDENTIALS.pluginApiUrl,
      // Emulate what runtime-app sends (roles and roleSettings from Dashboard)
      roles: DEV_CREDENTIALS.roles,
      roleSettings: DEV_CREDENTIALS.roleSettings
    };

    // Render the form
    root.render(React.createElement(FormTemplate, {
      dashboardParams: mockDashboardParams
    }));
  </script>
</body>
</html>
